(function(){"use strict";var e={3990:function(e,t,n){var o=n(9242),i=n(3396);function a(e,t){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}var l=n(89);const r={},s=(0,l.Z)(r,[["render",a]]);var h=s,c=n(678),m=n(7139);const d={class:"home"},p={class:"rightMain"},u=(0,i._)("div",{class:"title"},"跳转操作",-1),f={class:"cont"},y=["onClick"],v=(0,i._)("div",{class:"title"},"其他操作",-1),g={class:"cont"},b=(0,i._)("div",{class:"title"},"重置操作",-1),w={class:"cont"};function M(e,t,n,o,a,l){const r=(0,i.up)("threeIndex");return(0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",p,[u,(0,i._)("div",f,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.objList,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{onClick:t=>l.cameraPos(e)},(0,m.zw)(e.name),9,y)))),256))])]),v,(0,i._)("div",g,[(0,i._)("ul",null,[(0,i._)("li",{onClick:t[0]||(t[0]=(...e)=>l.rotationChange&&l.rotationChange(...e))},(0,m.zw)(a.rotation),1),(0,i._)("li",{onClick:t[1]||(t[1]=(...e)=>l.columnChange&&l.columnChange(...e))},"添加光柱"),(0,i._)("li",{onClick:t[2]||(t[2]=(...e)=>l.delAllChange&&l.delAllChange(...e))},"删除所有"),(0,i._)("li",{onClick:t[3]||(t[3]=(...e)=>l.delMarkChange&&l.delMarkChange(...e))},"删除美国标记点")])]),b,(0,i._)("div",w,[(0,i._)("ul",null,[(0,i._)("li",{onClick:t[4]||(t[4]=(...e)=>l.reset&&l.reset(...e))},"初始化数据")])])]),(0,i.Wm)(r,{ref:"threeMapId"},null,512)])}const C={style:{width:"100%",height:"100%"}},j={id:"layerMain"},x=(0,i._)("div",{class:"shape"},null,-1),D={ref:"mapId",style:{width:"100%",height:"100%"}};function k(e,t,n,o,a,l){return(0,i.wg)(),(0,i.iD)("div",C,[(0,i._)("div",j,[(0,i._)("div",null,(0,m.zw)(a.countryName),1),x]),(0,i._)("div",D,null,512)])}var F=n(1114),_=n(4543),B=n(39),z=n.p+"img/map.94e36116.jpg",A=n.p+"img/wl.e5e045fb.png";let I,E,O,P,L=new F.ZAu,T=70,$=100;var Y={name:"index",data(){return{mapDom:null,renderer:null,animationType:!0,rotationY:!0,meshAnimateType:!1,lonlat:{x:0,y:0,z:200},countryName:null}},mounted(){this.info()},methods:{info(){this.infoThree(),this.infoBall(),this.infoRender(),this.renderer.domElement.addEventListener("click",this.infoMouse)},infoThree(){E=new F.xsS,this.renderer=new F.CP7({antialias:!0}),this.mapDom=this.$refs.mapId,this.renderer.setSize(this.mapDom.clientWidth,this.mapDom.clientHeight),this.renderer.setClearColor(0,0),this.mapDom.appendChild(this.renderer.domElement),I=new F.cPb($,this.mapDom.clientWidth/this.mapDom.clientHeight,1,1e3),I.position.set(0,0,200),I.lookAt(0,0,0),this.infoOrbitControls()},infoRender(){this.renderer.clear(),this.animationType&&this.ballAnimation(),this.rotationY&&this.ballRotationY(),this.meshAnimateType&&this.meshAnimate(),this.renderer.render(E,I),requestAnimationFrame(this.infoRender),B.update()},infoOrbitControls(){O=new _.z(I,this.renderer.domElement),O.enableDamping=!0,O.enableZoom=!0,O.autoRotate=!1,O.autoRotateSpeed=2,O.enablePan=!0},infoBall(){let e=new F.dpR;e.load(z,(function(e){let t=new F.xo$(T,100,100),n=new F.vBJ({map:e});P=new F.Kj0(t,n),P.name="ballMain",E.add(P)}))},ballAnimation(){$-=.6,$<=45?(this.animationType=!1,I.position.set(0,0,200),I.lookAt(0,0,0),this.infoOrbitControls()):(I=new F.cPb($,this.mapDom.clientWidth/this.mapDom.clientHeight,1,1e3),I.position.set(0,0,200),I.lookAt(0,0,0))},ballRotationY(){E.rotation.y+=.003},infoMark(e){console.log(L);let t=new F.BKK(1,1),n=new F.dpR,o=n.load(A),i=new F.vBJ({color:e.color,map:o,transparent:!0,opacity:0,side:F.ehD}),a=new F.Kj0(t,i);const l=this.lon2xyz(1.01*T,e.lon,e.lat);a.scale.set(2,2,2),a.name=e.name,a.privateType="mark",a.position.set(l.x,l.y,l.z);const r=new F.Pa4(l.x,l.y,l.z).normalize(),s=new F.Pa4(0,0,1);a.quaternion.setFromUnitVectors(s,r),void 0===E.getObjectByName(e.name)&&(L.add(a),E.add(L),this.meshAnimateType=!0)},meshAnimate(){for(let e=0;e<L.children.length;e++)"mark"===L.children[e].privateType&&(L.children[e].material.opacity+=.05*Math.random(),L.children[e].scale.set(L.children[e].material.opacity+7,L.children[e].material.opacity+7,L.children[e].material.opacity+7),L.children[e].scale.x>=9&&(L.children[e].material.opacity=0))},cameraPos(e){this.frameDivClose();let t=E.getObjectByName(e.name);t?(E.rotation.y=0,this.rotationY=!1,new B.Tween({x:this.lonlat.x,y:this.lonlat.y,z:this.lonlat.z}).to({x:2.8*t.position.x,y:2.8*t.position.y,z:2.8*t.position.z},1500).onUpdate((function(){I.position.x=this.x,I.position.y=this.y,I.position.z=this.z,I.lookAt(0,0,0)})).onComplete((()=>{this.retrievalLayer(e.name)})).easing(B.Easing.Sinusoidal.InOut).start(),this.lonlat=I.position,this.countryName=e.name):(console.log("图层数据已被全部删除，请重新刷新界面，或者重新调用数据初始化方法: this.infoMap ()"),alert("图层数据已被全部删除，请重新刷新界面，或者重新调用数据初始化方法: this.infoMap ()"))},retrievalLayer(e){let t=E.getObjectByName(e);this.infoDiv(t.position.x,t.position.y,t.position.z)},infoMouse(e){e.preventDefault();const t=new F.iMs,n=new F.FM8;let o=this.mapDom.getBoundingClientRect();n.x=(e.clientX-o.left)/this.mapDom.offsetWidth*2-1,n.y=-(e.clientY-o.top)/this.mapDom.offsetHeight*2+1,t.setFromCamera(n,I);let i=t.intersectObjects(E.children);for(let a=0;a<i.length;a++){if("ballMain"!==i[a].object.name){this.countryName=i[a].object.name;let e={name:i[a].object.name};return this.cameraPos(e),!1}this.rotationY=!0,this.frameDivClose()}},infoDiv(e,t,n){let o=new F.Pa4(e,t,n),i=o.project(I),a=this.mapDom.offsetWidth/2,l=this.mapDom.offsetHeight/2,r=Math.round(i.x*a+a),s=Math.round(-i.y*l+l),h=document.getElementById("layerMain");h.style.display="block",h.style.left=r-150+"px",h.style.top=s-180+"px"},frameDivClose(){let e=document.getElementById("layerMain");e.style.display="none"},infoColumn(e){const t=new F.vBJ({color:e.color,transparent:!0,opacity:.9,side:F.ehD}),n=this.lon2xyz(1.01*T,e.lon,e.lat),o=new F.Pa4(n.x,n.y,n.z).normalize(),i=new F.fHI(.2,2.8,30),a=new F.Kj0(i,t);a.name=e.name,a.privateType="column",a.position.set(n.x,n.y,n.z),a.quaternion.setFromUnitVectors(new F.Pa4(0,1,0),o),L.add(a),E.add(L)},delAll(){if(this.frameDivClose(),L.traverse((e=>{"Mesh"===e.type&&(e.geometry.dispose(),e.material.dispose())})),E.remove(L),L.children&&L.children.length>0){let e=0;for(e;e<L.children.length;e++)L.remove(L.children[e])}},delMark(e){this.frameDivClose();let t=E.getObjectByName(e.name);L.remove(t)},lon2xyz(e,t,n){const o=(Number(t)+90)*(Math.PI/180),i=Number(n)*(Math.PI/180),a=e*Math.cos(i)*Math.sin(o),l=e*Math.sin(i),r=e*Math.cos(o)*Math.cos(i);return{x:a,y:l,z:r}}}};const N=(0,l.Z)(Y,[["render",k]]);var R=N,H={name:"HomeView",components:{threeIndex:R},data(){return{objList:[{lon:116.358976,lat:39.803282,name:"中国",color:"#1FFBC6"},{lon:139.812263,lat:35.677294,name:"日本",color:"#A41FE8"},{lon:77.198596,lat:28.575136,name:"印度",color:"#E8BB1F"},{lon:-77.02238,lat:38.900042,name:"美国",color:"#E81F56"},{lon:31.266092,lat:30.085626,name:"埃及",color:"#1FFBC6"},{lon:103.813654,lat:1.291125,name:"新加坡",color:"#E8BB1F"},{lon:-47.930912,lat:-15.781949,name:"巴西",color:"#A41FE8"},{lon:149.130214,lat:-35.318235,name:"澳大利亚",color:"#E81F56"}],objList_2:[{lon:116.358976,lat:39.803282,name:"中国column",color:"#1FFBC6"},{lon:139.812263,lat:35.677294,name:"日本column",color:"#A41FE8"},{lon:77.198596,lat:28.575136,name:"印度column",color:"#E8BB1F"},{lon:-77.02238,lat:38.900042,name:"美国column",color:"#E81F56"},{lon:31.266092,lat:30.085626,name:"埃及column",color:"#1FFBC6"},{lon:103.813654,lat:1.291125,name:"新加坡column",color:"#E8BB1F"},{lon:-47.930912,lat:-15.781949,name:"巴西column",color:"#A41FE8"},{lon:149.130214,lat:-35.318235,name:"澳大利亚column",color:"#E81F56"}],rotation:"关闭旋转"}},mounted(){this.infoMap()},methods:{reset(){this.infoMap()},infoMap(){for(let e=0;e<this.objList.length;e++)this.$refs.threeMapId.infoMark(this.objList[e])},cameraPos(e){this.$refs.threeMapId.cameraPos(e)},rotationChange(){this.$refs.threeMapId.rotationY=!this.$refs.threeMapId.rotationY,this.rotation=!0===this.$refs.threeMapId.rotationY?"关闭旋转":"开启旋转",this.$refs.threeMapId.frameDivClose()},columnChange(){for(let e=0;e<this.objList_2.length;e++)this.$refs.threeMapId.infoColumn(this.objList_2[e])},delAllChange(){for(let e=0;e<this.objList.length;e++)this.$refs.threeMapId.delAll(this.objList[e]);for(let e=0;e<this.objList_2.length;e++)this.$refs.threeMapId.delAll(this.objList_2[e])},delMarkChange(){let e={name:"美国"};this.$refs.threeMapId.delMark(e)}}};const K=(0,l.Z)(H,[["render",M]]);var W=K;const Z=[{path:"/",name:"home",component:W}],S=(0,c.p7)({history:(0,c.r5)(),routes:Z});var q=S;(0,o.ri)(h).use(q).mount("#app")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,a){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],a=e[c][2];for(var r=!0,s=0;s<o.length;s++)(!1&a||l>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(r=!1,a<l&&(l=a));if(r){e.splice(c--,1);var h=i();void 0!==h&&(t=h)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,i,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,a,l=o[0],r=o[1],s=o[2],h=0;if(l.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(s)var c=s(n)}for(t&&t(o);h<l.length;h++)a=l[h],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},o=self["webpackChunkmythree"]=self["webpackChunkmythree"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3990)}));o=n.O(o)})();
//# sourceMappingURL=app.ac8ca8e5.js.map